shared source code

Original master alterationss

First pull request for master.
