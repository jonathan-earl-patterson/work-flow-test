shared source code

Original master alteration

First pull request for master.
